(this["webpackJsonpinsta-clone"]=this["webpackJsonpinsta-clone"]||[]).push([[5],{133:function(e,t,a){"use strict";var n=a(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(a(0)),s=(0,n(a(36)).default)(c.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.default=s},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){"use strict";var n=a(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(a(0)),s=(0,n(a(36)).default)(c.default.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.default=s},138:function(e,t,a){"use strict";var n=a(10),c=a(0),s=a.n(c),l=(a(135),a(136),a(133)),o=a.n(l),r=a(137),i=a.n(r),m=a(127),u=a(18),d=a(32),p=a.n(d),f=a(24),v=a(140),E=a(131),h=Object(v.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},comment:{width:e.spacing(4),height:e.spacing(4)}}}));var _=function(e){var t,a,l=e.comment,o=h(),r=s.a.useState(null),i=Object(n.a)(r,2),m=i[0],d=i[1];return Object(c.useEffect)((function(){u.b.collection("users").doc(l.data.userUid).get().then((function(e){d({user:e.data()})}))}),[]),s.a.createElement("li",null,s.a.createElement(E.a,{className:o.comment,alt:"user",src:null===m||void 0===m||null===(t=m.user)||void 0===t?void 0:t.picUrl}),s.a.createElement("span",{className:"post__comment__user"},null===m||void 0===m||null===(a=m.user)||void 0===a?void 0:a.displayName),s.a.createElement("span",{className:"comment"},l.data.comment))};var b=function(e){var t=e.post,a=Object(c.useContext)(f.a).currentUser,l=s.a.useState(!1),r=Object(n.a)(l,2),d=r[0],v=r[1],E=s.a.useState(""),h=Object(n.a)(E,2),b=h[0],g=h[1],j=s.a.useState([]),N=Object(n.a)(j,2),O=N[0],y=N[1],S=s.a.useState(!1),U=Object(n.a)(S,2),C=U[0],k=U[1];return Object(c.useEffect)((function(){g(""),u.b.collection("posts").doc(t.id).collection("comments").orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,data:e.data()})})),y(t)}))}),[t]),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"comments"},d&&s.a.createElement("ul",{className:"all__comments"},s.a.createElement("li",null,s.a.createElement("span",{className:"comments__head"},"Comments"),s.a.createElement("span",{onClick:function(){return v(!d)},className:"comment__close"},s.a.createElement(o.a,null))),O.map((function(e){return s.a.createElement(_,{key:e.id,comment:e})}))),d?"":s.a.createElement("p",{className:"view__comments",onClick:function(){return v(!d)}},"View all comments")),s.a.createElement("div",{className:"user__comment"},s.a.createElement("form",null,s.a.createElement("input",{type:"text",name:"comment",id:"comment",value:b,onChange:function(e){return g(e.target.value)},placeholder:"Type comment here...",autoComplete:"off"}),s.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),b.length>0&&(k(!0),u.b.collection("posts").doc(t.id).collection("comments").add({userUid:a.uid,comment:b,createdAt:p.a.firestore.FieldValue.serverTimestamp()}).then((function(e){k(!1),g("")})).catch((function(e){k(!1),g(""),console.error("Error adding document: ",e)})))}},C?s.a.createElement(m.a,{size:24,color:"inherit"}):s.a.createElement(i.a,{fontSize:"small",color:"action"})))))},g=Object(v.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},small:{width:e.spacing(5),height:e.spacing(5)}}}));t.a=function(e){var t=e.post,a=s.a.useState(null),l=Object(n.a)(a,2),o=l[0],r=l[1],i=s.a.useState(!1),m=Object(n.a)(i,2),d=m[0],p=m[1],f=g();return Object(c.useEffect)((function(){u.b.collection("users").doc(t.data.userUid).get().then((function(e){r({username:e.data().username,postUserPicUrl:e.data().picUrl})}))}),[t.id]),s.a.createElement("div",{className:"posts"},s.a.createElement("div",{className:"post__head"},s.a.createElement(E.a,{className:f.small,alt:null===o||void 0===o?void 0:o.username,src:null===o||void 0===o?void 0:o.postUserPicUrl}),s.a.createElement("span",{className:"post__username"},null===o||void 0===o?void 0:o.username)),s.a.createElement("div",{className:"postImg__container"},s.a.createElement("img",{src:t.data.postUrl,onLoad:p,alt:"post-img",className:"post__img"}),s.a.createElement("img",Object.assign({src:t.data.postThumbnailUrl,alt:"post-thumbnail"},d&&{style:{opacity:"0"}},{className:"post__thumbnail"}))),s.a.createElement("p",{className:"post__caption"},s.a.createElement("span",{className:"post__user"},null===o||void 0===o?void 0:o.username),s.a.createElement("span",null,t.data.caption)),s.a.createElement(b,{post:t}))}},140:function(e,t,a){"use strict";var n=a(1),c=a(129),s=a(39);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(c.a)(e,Object(n.a)({defaultTheme:s.a},t))}},154:function(e,t,a){"use strict";a.r(t);var n=a(10),c=a(0),s=a.n(c),l=(a(135),a(138)),o=a(18),r=a(127);t.default=s.a.memo((function(){var e=s.a.useState(!0),t=Object(n.a)(e,2),a=t[0],i=t[1],m=s.a.useState([]),u=Object(n.a)(m,2),d=u[0],p=u[1];return Object(c.useEffect)((function(){return o.b.collection("posts").orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,data:e.data()})})),p(t),i(!1)}))}),[]),s.a.createElement("div",{className:"posts__container"},a&&s.a.createElement("div",{className:"loading_posts"},s.a.createElement(r.a,{size:50,color:"inherit"})),d.length>0&&d.map((function(e){return s.a.createElement(l.a,{key:e.id,post:e})})))}))}}]);
//# sourceMappingURL=5.d04a53ff.chunk.js.map