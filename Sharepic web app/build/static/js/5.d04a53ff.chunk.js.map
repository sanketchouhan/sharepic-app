{"version":3,"sources":["../node_modules/@material-ui/icons/Close.js","../node_modules/@material-ui/icons/Send.js","components/posts/ListComment.js","components/posts/Comment.js","components/posts/Post.js","../node_modules/@material-ui/core/esm/styles/makeStyles.js","components/posts/Posts.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_default","createElement","d","useStyles","makeStyles","theme","root","display","margin","spacing","comment","width","height","ListComment","classes","React","useState","commentUser","setCommentUser","useEffect","firestore","collection","doc","data","userUid","get","then","user","Avatar","className","alt","src","picUrl","displayName","Comment","post","currentUser","useContext","UserContext","viewComments","setViewComments","setComment","comments","setComments","postingComment","setPostingComment","id","orderBy","onSnapshot","_comments","forEach","push","onClick","map","cm","key","type","name","onChange","e","target","placeholder","autoComplete","preventDefault","length","add","uid","createdAt","firebase","FieldValue","serverTimestamp","res","catch","err","console","error","CircularProgress","size","color","fontSize","small","Post","postUser","setPostUser","imgOnLoadComplete","setImgOnLoadComplete","username","postUserPicUrl","postUrl","onLoad","postThumbnailUrl","style","opacity","caption","stylesOrCreator","options","arguments","undefined","makeStylesWithoutDefault","_extends","defaultTheme","memo","loading","setLoading","posts","setPosts","_posts"],"mappings":"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","file":"static/js/5.d04a53ff.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"\n}), 'Send');\n\nexports.default = _default;","import React, { useEffect } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { firestore } from '../../components/firebase';\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        '& > *': {\r\n            margin: theme.spacing(1),\r\n        },\r\n    },\r\n    comment: {\r\n        width: theme.spacing(4),\r\n        height: theme.spacing(4),\r\n    }\r\n}));\r\n\r\nfunction ListComment({ comment }) {\r\n\r\n    const classes = useStyles();\r\n    const [commentUser, setCommentUser] = React.useState(null);\r\n\r\n    useEffect(() => {\r\n        // console.log(\"list useeffect\")\r\n        firestore.collection('users').doc(comment.data.userUid).get().then(user => {\r\n            setCommentUser({\r\n                user: user.data()\r\n            });\r\n        });\r\n    },[]);\r\n\r\n\r\n    return (\r\n        <li>\r\n            <Avatar className={classes.comment} alt=\"user\" src={commentUser?.user?.picUrl} />\r\n            <span className=\"post__comment__user\">{commentUser?.user?.displayName}</span>\r\n            <span className=\"comment\">{comment.data.comment}</span>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default ListComment\r\n","import React, { useEffect, useContext } from 'react'\r\nimport './Comment.css'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { firestore } from '../../components/firebase';\r\nimport firebase from \"firebase/app\";\r\nimport { UserContext } from '../../components/UserContext';\r\nimport ListComment from './ListComment';\r\n\r\nfunction Comment({ post }) {\r\n    // console.log(\"comment\")\r\n\r\n    const { currentUser } = useContext(UserContext);\r\n\r\n    const [viewComments, setViewComments] = React.useState(false);\r\n    const [comment, setComment] = React.useState('');\r\n    const [comments, setComments] = React.useState([]);\r\n    const [postingComment, setPostingComment] = React.useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n        setComment('');\r\n        // console.log(\"comment useeffect\")\r\n        firestore.collection('posts').doc(post.id).collection('comments').orderBy('createdAt', 'desc').onSnapshot(data => {\r\n            var _comments = [];\r\n            data.forEach(doc => {\r\n                _comments.push({\r\n                    id: doc.id,\r\n                    data: doc.data()\r\n                })\r\n            });\r\n            setComments(_comments)\r\n            // console.log(_comments);\r\n        });\r\n    }, [post])\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        if (comment.length > 0) {\r\n            setPostingComment(true);\r\n            firestore.collection('posts').doc(post.id).collection('comments').add({\r\n                userUid: currentUser.uid,\r\n                comment: comment,\r\n                createdAt: firebase.firestore.FieldValue.serverTimestamp()\r\n            }).then(res => {\r\n                setPostingComment(false);\r\n                setComment('')\r\n            }).catch(err => {\r\n                setPostingComment(false);\r\n                setComment('')\r\n                console.error(\"Error adding document: \", err);\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className=\"comments\">\r\n                {viewComments &&\r\n                    <ul className=\"all__comments\">\r\n                        <li>\r\n                            <span className=\"comments__head\">Comments</span>\r\n                            <span onClick={() => setViewComments(!viewComments)} className=\"comment__close\">\r\n                                <CloseIcon />\r\n                            </span>\r\n                        </li>\r\n\r\n                        {comments.map(cm => <ListComment key={cm.id} comment={cm} />)}\r\n                    </ul>\r\n                }\r\n                {viewComments ? '' : <p className=\"view__comments\" onClick={() => setViewComments(!viewComments)}>View all comments</p>}\r\n            </div>\r\n            <div className=\"user__comment\">\r\n                <form>\r\n                    <input type=\"text\" name=\"comment\" id=\"comment\" value={comment} onChange={(e) => setComment(e.target.value)} placeholder=\"Type comment here...\" autoComplete=\"off\" />\r\n                    <button type=\"submit\" onClick={handleSubmit}>\r\n                        {postingComment ?\r\n                            <CircularProgress size={24} color=\"inherit\" />\r\n                            :\r\n                            <SendIcon fontSize=\"small\" color=\"action\" />\r\n                        }\r\n\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Comment\r\n","import React, { useEffect } from \"react\";\r\nimport \"./Posts.css\";\r\nimport Comment from \"./Comment\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport { firestore } from \"../../components/firebase\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n  small: {\r\n    width: theme.spacing(5),\r\n    height: theme.spacing(5),\r\n  },\r\n}));\r\n\r\nfunction Post({ post }) {\r\n  const [postUser, setPostUser] = React.useState(null);\r\n  const [imgOnLoadComplete, setImgOnLoadComplete] = React.useState(false);\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    firestore\r\n      .collection(\"users\")\r\n      .doc(post.data.userUid)\r\n      .get()\r\n      .then((doc) => {\r\n        setPostUser({\r\n          username: doc.data().username,\r\n          postUserPicUrl: doc.data().picUrl,\r\n        });\r\n      });\r\n  }, [post.id]);\r\n\r\n  return (\r\n    <div className=\"posts\">\r\n      <div className=\"post__head\">\r\n        <Avatar\r\n          className={classes.small}\r\n          alt={postUser?.username}\r\n          src={postUser?.postUserPicUrl}\r\n        />\r\n        <span className=\"post__username\">{postUser?.username}</span>\r\n      </div>\r\n      <div className=\"postImg__container\">\r\n        <img\r\n          src={post.data.postUrl}\r\n          onLoad={setImgOnLoadComplete}\r\n          alt=\"post-img\"\r\n          className=\"post__img\"\r\n        />\r\n        <img\r\n          src={post.data.postThumbnailUrl}\r\n          alt=\"post-thumbnail\"\r\n          {...(imgOnLoadComplete && { style: { opacity: \"0\" } })}\r\n          className=\"post__thumbnail\"\r\n        />\r\n      </div>\r\n      <p className=\"post__caption\">\r\n        <span className=\"post__user\">{postUser?.username}</span>\r\n        <span>{post.data.caption}</span>\r\n      </p>\r\n      <Comment post={post} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Post;\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { makeStyles as makeStylesWithoutDefault } from '@material-ui/styles';\nimport defaultTheme from './defaultTheme';\n\nfunction makeStyles(stylesOrCreator) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return makeStylesWithoutDefault(stylesOrCreator, _extends({\n    defaultTheme: defaultTheme\n  }, options));\n}\n\nexport default makeStyles;","import React, { useEffect } from 'react'\r\nimport './Posts.css'\r\nimport Post from './Post'\r\nimport { firestore } from '../../components/firebase';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\n\r\n\r\n\r\nfunction Posts() {\r\n\r\n    const [loading, setLoading] = React.useState(true);\r\n    const [posts, setPosts] = React.useState([]);\r\n\r\n    useEffect(() => {\r\n        // console.log(\"posts useeffect\");\r\n        return firestore.collection('posts').orderBy('createdAt', 'desc').onSnapshot(data => {\r\n            var _posts = [];\r\n            data.forEach(doc => {\r\n                _posts.push({\r\n                    id: doc.id,\r\n                    data: doc.data()\r\n                })\r\n            });\r\n            setPosts(_posts);\r\n            // console.log(_posts);\r\n            setLoading(false)\r\n        })\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"posts__container\">\r\n            {loading && <div className=\"loading_posts\"><CircularProgress size={50} color=\"inherit\" /></div>}\r\n\r\n            {posts.length > 0 && posts.map(post => <Post key={post.id} post={post} />)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default React.memo(Posts) \r\n"],"sourceRoot":""}